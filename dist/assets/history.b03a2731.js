import{_ as k}from"./@babel.88147d3f.js";var h,x=h||(h={});x.Pop="POP";x.Push="PUSH";x.Replace="REPLACE";var H=function(t){return t};function L(t){t.preventDefault(),t.returnValue=""}function O(){var t=[];return{get length(){return t.length},push:function(a){return t.push(a),function(){t=t.filter(function(r){return r!==a})}},call:function(a){t.forEach(function(r){return r&&r(a)})}}}function R(){return Math.random().toString(36).substr(2,8)}function A(t){var a=t.pathname,r=t.search;return t=t.hash,(a===void 0?"/":a)+(r===void 0?"":r)+(t===void 0?"":t)}function B(t){var a={};if(t){var r=t.indexOf("#");0<=r&&(a.hash=t.substr(r),t=t.substr(0,r)),r=t.indexOf("?"),0<=r&&(a.search=t.substr(r),t=t.substr(0,r)),t&&(a.pathname=t)}return a}function _(t){function a(){var n=c.location,e=l.state||{};return[e.idx,H({pathname:n.pathname,search:n.search,hash:n.hash,state:e.usr||null,key:e.key||"default"})]}function r(n){return typeof n=="string"?n:A(n)}function P(n,e){return e===void 0&&(e=null),H(k({pathname:g.pathname,hash:"",search:""},typeof n=="string"?B(n):n,{state:e,key:R()}))}function y(n){m=n,n=a(),s=n[0],g=n[1],S.call({action:m,location:g})}function E(n,e){function f(){E(n,e)}var i=h.Push,o=P(n,e);if(!u.length||(u.call({action:i,location:o,retry:f}),!1)){var v=[{usr:o.state,key:o.key,idx:s+1},r(o)];o=v[0],v=v[1];try{l.pushState(o,"",v)}catch{c.location.assign(v)}y(i)}}function w(n,e){function f(){w(n,e)}var i=h.Replace,o=P(n,e);u.length&&(u.call({action:i,location:o,retry:f}),1)||(o=[{usr:o.state,key:o.key,idx:s},r(o)],l.replaceState(o[0],"",o[1]),y(i))}function p(n){l.go(n)}t===void 0&&(t={}),t=t.window;var c=t===void 0?document.defaultView:t,l=c.history,d=null;c.addEventListener("popstate",function(){if(d)u.call(d),d=null;else{var n=h.Pop,e=a(),f=e[0];if(e=e[1],u.length){if(f!=null){var i=s-f;i&&(d={action:n,location:e,retry:function(){p(-1*i)}},p(i))}}else y(n)}});var m=h.Pop;t=a();var s=t[0],g=t[1],S=O(),u=O();return s==null&&(s=0,l.replaceState(k({},l.state,{idx:s}),"")),{get action(){return m},get location(){return g},createHref:r,push:E,replace:w,go:p,back:function(){p(-1)},forward:function(){p(1)},listen:function(n){return S.push(n)},block:function(n){var e=u.push(n);return u.length===1&&c.addEventListener("beforeunload",L),function(){e(),u.length||c.removeEventListener("beforeunload",L)}}}}export{A as I,B as J,_ as c,h as r};
