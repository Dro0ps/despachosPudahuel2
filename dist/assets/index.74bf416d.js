var ie=Object.defineProperty,ce=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var R=(t,a,o)=>a in t?ie(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,O=(t,a)=>{for(var o in a||(a={}))me.call(a,o)&&R(t,o,a[o]);if(H)for(var o of H(a))ue.call(a,o)&&R(t,o,a[o]);return t},M=(t,a)=>ce(t,de(a));var L=(t,a,o)=>(R(t,typeof a!="symbol"?a+"":a,o),o);import{j as P,r as h,C as fe,R as he}from"./react.d3c4e055.js";import{R as be}from"./react-dom.273fda70.js";import{L as V,B as pe}from"./react-router-dom.761990d5.js";import{O as G,b as ge,a as B,d as I,e as xe,f as y,N as U}from"./react-router.a5818549.js";import{i as ye,g as z,s as Ne,L as A,a as W,b as J,u as K,c as Q,y as Z,D as q,h as X,U as we,V as _,w as ve,d as De,T as Y,o as je}from"./@firebase.f648ad6d.js";import"./firebase.bce36158.js";import{F as ee,a as te,b as v}from"./formik.7df3ec4b.js";import{c as ae,a as D}from"./yup.e9b5c41a.js";import"./property-expr.a65623d2.js";import{h as T}from"./moment.08a7f518.js";import{F as Fe,f as Ce}from"./@fortawesome.49b2bfa5.js";import{Q as Se}from"./react-data-table-component.1f807b1d.js";import{s as re}from"./styled-components.59020a3c.js";import{L as ke}from"./@heroicons.a6aee78f.js";import"./object-assign.9840bf7d.js";import"./scheduler.2cf49938.js";import"./history.b03a2731.js";import"./@babel.88147d3f.js";import"./react-fast-compare.28c49cfe.js";import"./deepmerge.39b49f80.js";import"./lodash-es.16147c0a.js";import"./tiny-warning.49191a0e.js";import"./hoist-non-react-statics.0db3c983.js";import"./react-is.6f6b8a24.js";import"./nanoclone.7d3cb5fe.js";import"./lodash.a9e8b3ca.js";import"./toposort.ef497e49.js";import"./prop-types.d6ec705b.js";import"./@emotion.5357a122.js";const Ee=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&m(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};Ee();const e=P.exports.jsx,r=P.exports.jsxs,p=P.exports.Fragment,Ae=()=>e(p,{children:e(G,{})}),Le={apiKey:"AIzaSyBoNeaI0CtrF_RmZcsJoW0G9JVuBCrchNo",authDomain:"despachospudahuel2.firebaseapp.com",projectId:"despachospudahuel2",storageBucket:"despachospudahuel2.appspot.com",messagingSenderId:"610968505969",appId:"1:610968505969:web:717cac64fdcf2189cf15d0"},g=ye(Le),Ie=z(g),qe=()=>{const a=ge().pathname,o=()=>{Ne(Ie)};return r("div",{className:"md:flex md:min-h-screen",children:[r("div",{className:"md:w-1/4 bg-orange-900 px-5 py-10 flex flex-col justify-between",children:[r("div",{children:[e("h2",{className:"text-4xl font-extrabold text-center text-white",children:"Despachos - Pudahuel"}),r("nav",{className:"mt-10",children:[e(V,{to:"/despachos",className:`${a==="/despachos"?"text-orange-300":"text-white"}
                    text-2xl block mt-2 font-extrabold hover:text-orange-300 transition-colors`,children:"Despachos"}),e(V,{to:"/despachos/nuevo",className:`${a==="/despachos/nuevo"?"text-orange-300":"text-white"}
                    text-2xl block mt-2 font-extrabold hover:text-orange-300 transition-colors`,children:"Nuevo Despacho"})]})]}),e("button",{className:"text-1xl font-extrabold text-center text-white hover:text-orange-300 transition-colors",onClick:o,children:"Cerrar Sesi\xF3n"})]}),e("div",{className:"md:w-3/4 p-10 md:h-screen overflow-scroll",children:e(G,{})})]})},j=({children:t})=>e("div",{children:e("div",{className:"text-red-600 text-center font-bold",children:t})});const $=()=>r("div",{className:"sk-chase",children:[e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"})]}),oe=A(g),$e=W(g),Re=({despacho:t,cargando:a})=>{var u,f,N,w,C,S,k,E,d;const o=B(),{id:m}=I(),n=ae().shape({nombre:D().required("El nombre del cliente es Obligatorio"),direccion:D().required("La Direcci\xF3n es Obligatoria"),documento:D().required("El Numero del documento es Obligatorio"),notas:D().required("Debe Agregar una nota o intrucciones del Despacho")});let s,i;const x=async l=>{i=l.target.files[0]};console.log(i);const c=async l=>{try{if(i){const b=J($e,`archivos/${i.name}`);await K(b,i),s=await Q(b),l.archivo=s,await Z(q(oe,`despachos/${m}`),l)}await Z(q(oe,`despachos/${m}`),l)}catch(b){console.log(b)}o("/despachos")};return console.log(a),a?e($,{}):r("div",{className:"bg-white mt-10 px-5 py-10 rounded-md shadow-md md:w-3/4 mx-auto",children:[e("h1",{className:"text-gray-600 font-bold text-xl uppercase \r text-center",children:(t==null?void 0:t.nombre)?"Editar Despacho":"Registrar nuevo"}),e(ee,{initialValues:{creado:+new Date,recibido:(u=t==null?void 0:t.recibido)!=null?u:!1,despachado:(f=t==null?void 0:t.despachado)!=null?f:!1,confirmado:(N=t==null?void 0:t.confirmado)!=null?N:!1,fecha_despachado:(w=t==null?void 0:t.fecha_despachado)!=null?w:"",fecha_confirmado:(C=t==null?void 0:t.fecha_confirmado)!=null?C:"",nombre:(S=t==null?void 0:t.nombre)!=null?S:"",direccion:(k=t==null?void 0:t.direccion)!=null?k:"",documento:(E=t==null?void 0:t.documento)!=null?E:"",notas:(d=t==null?void 0:t.notas)!=null?d:"",archivo:s!=null?s:""},enableReinitialize:!0,onSubmit:async(l,{resetForm:b})=>{await c(l),b()},validationSchema:n,children:({errors:l,touched:b})=>r(te,{className:"mt-10",children:[r("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"nombre",children:"Cliente:"}),e(v,{type:"text",id:"nombre",name:"nombre",className:"mt-2 block w-full p-3 bg-gray-100",placeholder:" Nombre del Cliente "}),l.nombre&&b.nombre?e(j,{children:l.nombre}):null]}),r("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"direccion",children:"Direcci\xF3n:"}),e(v,{type:"text",id:"direccion",name:"direccion",className:"mt-2 block w-full p-3 bg-gray-100",placeholder:" Direcci\xF3n de Envio"}),l.direccion&&b.direccion?e(j,{children:l.direccion}):null]}),r("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"documento",children:"Numero de Documento:"}),e(v,{type:"number",id:"documento",name:"documento",className:"mt-2 block w-full p-3 bg-gray-100",placeholder:" Boleta / Factura / Guia"}),l.documento&&b.documento?e(j,{children:l.documento}):null]}),r("div",{className:"mb-4",children:[e("label",{className:"text-gray-800  ",htmlFor:"notas",children:"Notas:"}),e(v,{as:"textarea",type:"text",id:"notas",name:"notas",className:"mt-2 block w-full h-40 p-3 bg-gray-100",placeholder:" Mensaje "}),l.notas&&b.notas?e(j,{children:l.notas}):null]}),e("div",{className:"mb-4",children:e("input",{type:"file",onChange:x,className:"block w-full text-sm text-gray-500\r file:mr-4 file:py-2 file:px-4\r file:rounded-full file:border-0\r file:text-sm file:font-semibold\r file:bg-violet-50 file:text-orange-700\r hover:file:bg-violet-100"})}),e("input",{type:"submit",value:(t==null?void 0:t.nombre)?"Editar":"Agregar Despacho",className:"mt-5 w-full bg-orange-800 p-3 text-white uppercase font-bold text-lg\r cursor-pointer hover:text-orange-300 transition-colors"})]})})]})},Oe=A(g),Pe=()=>{const[t,a]=h.exports.useState({}),[o,m]=h.exports.useState(!0),{id:n}=I();return h.exports.useEffect(()=>{m(!o),(async()=>{try{const i=q(Oe,`despachos/${n}`),c=(await X(i)).data();a(c)}catch(i){console.log(i)}m(!1)})()},[]),r(p,{children:[e("h1",{className:"font-extrabold text-4xl flex justify-center text-orange-900",children:"Edici\xF3n de Despacho"}),(t==null?void 0:t.nombre)?e(Re,{despacho:t,cargando:o}):e("p",{children:"Despacho ID no v\xE1lido"})]})};T.locale("es");const Be=A(g),ze=()=>{const[t,a]=h.exports.useState(),[o,m]=h.exports.useState(!0),{id:n}=I();return h.exports.useEffect(()=>{m(!o),(async()=>{try{const i=q(Be,`despachos/${n}`),c=(await X(i)).data();a(c)}catch(i){console.log(i)}m(!1)})()},[]),e("div",{children:o?e($,{}):e(p,{children:t?r(p,{children:[e("h1",{className:"font-black text-4xl mt-8 text-orange-900",children:t.nombre}),e("p",{className:"mt-3",children:"Detalles de la Orden "}),t.creado&&r("p",{className:"text-2xl mt-4 text-gray-600",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Creado el: "}),`${T(t.creado).format("LL")} ${T(t.creado).format("LTS")}`]}),t.direccion&&r("p",{className:"text-2xl mt-4 text-gray-600",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Direcci\xF3n: "}),t.direccion]}),t.documento&&r("p",{className:"text-2xl mt-4 text-gray-600",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"n\xB0 documento: "}),t.documento]}),t.notas&&r("p",{className:"text-2xl mt-4 text-gray-600",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Nota: "}),t.notas]}),t.archivo&&e("p",{className:"text-1xl mt-8 text-gray-600",children:r("a",{href:t.archivo,className:"text-2xl text-orange-800",target:"_blank",children:[e(Fe,{icon:Ce}),"Descargar Adjunto"]})})]}):e($,{})})})},F=re.p`
    color: #bd4f23;
    font-weight: bold;
    font-size: 15px;
`,ne=re.button`

    font-size: 15px;
    font-weight: 900;
    border-radius: 5px;
    border: none;
    transition: background-color .3s ease;
`,_e=A(g),Te=()=>{const t=B(),[a,o]=h.exports.useState([]),[m,n]=h.exports.useState(!0);h.exports.useEffect(()=>{(async()=>{try{const u=we(_(_e,"despachos")),f=await ve(u),N=[];f.forEach(w=>{N.push(O({id:w.id},w.data()))}),o(N),a&&n(!1)}catch(u){console.log(u)}})()},[]);const s=[{name:e(F,{children:"Creado"}),selector:c=>c.creado,sortable:!0,omit:!0,wrap:!0},{name:e(F,{children:"N\xB0 Doc"}),selector:c=>c.documento,cell:c=>e(ne,{onClick:()=>t(`/despachos/${c.id}`),children:c.documento}),sortable:!1,grow:0,wrap:!0},{name:e(F,{children:"Nombre del Cliente"}),selector:c=>c.nombre,sortable:!1,grow:.6,wrap:!0},{name:e(F,{children:"Direcci\xF3n"}),selector:c=>c.direccion,sortable:!1,grow:1,wrap:!0},{name:e(F,{children:"Detalles"}),selector:c=>c.notas,sortable:!1,grow:2,wrap:!0},{name:e(F,{children:"Acciones"}),cell:c=>e(ne,{onClick:()=>{t(`/despachos/editar/${c.id}`)},children:"Editar"}),sortable:!1,grow:0,wrap:!0}],i={rowsPerPageText:"Filas por pagina",rangeSeparatorText:" de ",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};class x extends fe{constructor(){super(...arguments);L(this,"state",{busqueda:"",despachos:[]});L(this,"onChange",async u=>{u.persist(),await this.setState({busqueda:u.target.value}),this.filtrarElementos()});L(this,"filtrarElementos",()=>{var u=a.filter(f=>{if(f.nombre.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(this.state.busqueda)||f.direccion.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(this.state.busqueda)||f.documento.toString().includes(this.state.busqueda)||f.notas.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(this.state.busqueda))return f});this.setState({despachos:u})})}componentDidMount(){this.setState({despachos:a})}render(){return r(p,{children:[e(F,{children:"Filtrar resultados"}),e("input",{type:"text",placeholder:"Buscar",className:" mb-3 mt-3  pl-7 pr-12  ",name:"busqueda",value:this.state.busqueda,onChange:this.onChange}),e(Se,{expandibleRows:!0,columns:s,data:this.state.despachos,pagination:!0,paginationComponentOptions:i,fixedHeader:!0,fixedHeaderScrollHeight:"1000px",progressPending:m,noDataComponent:e("p",{children:"No se encontro ning\xFAn elemento"})})]})}}return r(p,{children:[e("h1",{className:"font-extrabold text-4xl flex justify-center text-orange-900",children:"Listado de despachos"}),e(x,{})]})},He=z(g),Me=()=>{const[t,a]=h.exports.useState({email:"",password:""}),{email:o,password:m}=t,n=i=>{a(M(O({},t),{[i.target.name]:i.target.value}))};async function s(i){i.preventDefault();const x=De(He,o,m);console.log(x)}return e(p,{children:e("div",{className:"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r("div",{className:"max-w-md w-full space-y-8",children:[r("div",{children:[e("img",{className:"mx-auto h-auto w-auto",src:"https://homar.cl/wp-content/uploads/2020/09/logo-homar.png",alt:"Workflow"}),e("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Inicia Sesi\xF3n"})]}),r("form",{className:"mt-8 space-y-6",onSubmit:s,children:[r("div",{className:"rounded-md shadow-sm -space-y-px",children:[e("div",{children:e("input",{id:"email",name:"email",value:o,type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Email address",onChange:n})}),r("div",{children:[e("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e("input",{id:"password",name:"password",type:"password",value:m,required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Password",onChange:n})]})]}),e("div",{children:r("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:[e("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:e(ke,{className:"h-5 w-5 text-orange-500 group-hover:text-orange-400","aria-hidden":"true"})}),"Sign in"]})})]})]})})})},se=A(g),Ve=W(g),le=({despacho:t,cargando:a})=>{var c,u,f,N,w,C,S,k,E;const o=B();I();const m=ae().shape({nombre:D().required("El nombre del cliente es Obligatorio"),direccion:D().required("La Direcci\xF3n es Obligatoria"),documento:D().required("El Numero del documento es Obligatorio"),notas:D().required("Debe Agregar una nota o intrucciones del Despacho")});let n,s;const i=async d=>{s=d.target.files[0]},x=async d=>{try{if(console.log(s),s){const l=J(Ve,`archivos/${s.name}`);await K(l,s),n=await Q(l),d.archivo=n,await Y(_(se,"despachos"),d)}else await Y(_(se,"despachos"),d);o("/despachos")}catch(l){console.log(l)}};return console.log(a),a?e($,{}):r("div",{className:"bg-white mt-10 px-5 py-10 rounded-md shadow-md md:w-3/4 mx-auto",children:[e("h1",{className:"text-gray-600 font-bold text-xl uppercase \r text-center",children:(t==null?void 0:t.nombre)?"Editar Despacho":"Registrar nuevo"}),e(ee,{initialValues:{creado:+new Date,recibido:(c=t==null?void 0:t.recibido)!=null?c:!1,despachado:(u=t==null?void 0:t.despachado)!=null?u:!1,confirmado:(f=t==null?void 0:t.confirmado)!=null?f:!1,fecha_despachado:(N=t==null?void 0:t.fecha_despachado)!=null?N:"",fecha_confirmado:(w=t==null?void 0:t.fecha_confirmado)!=null?w:"",nombre:(C=t==null?void 0:t.nombre)!=null?C:"",direccion:(S=t==null?void 0:t.direccion)!=null?S:"",documento:(k=t==null?void 0:t.documento)!=null?k:"",notas:(E=t==null?void 0:t.notas)!=null?E:"",archivo:n!=null?n:""},enableReinitialize:!0,onSubmit:async(d,{resetForm:l})=>{await x(d),l()},validationSchema:m,children:({errors:d,touched:l})=>r(te,{className:"mt-10",children:[r("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"nombre",children:"Cliente:"}),e(v,{type:"text",id:"nombre",name:"nombre",className:"mt-2 block w-full p-3 bg-gray-100",placeholder:" Nombre del Cliente "}),d.nombre&&l.nombre?e(j,{children:d.nombre}):null]}),r("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"direccion",children:"Direcci\xF3n:"}),e(v,{type:"text",id:"direccion",name:"direccion",className:"mt-2 block w-full p-3 bg-gray-100",placeholder:" Direcci\xF3n de Envio"}),d.direccion&&l.direccion?e(j,{children:d.direccion}):null]}),r("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"documento",children:"Numero de Documento:"}),e(v,{type:"number",id:"documento",name:"documento",className:"mt-2 block w-full p-3 bg-gray-100",placeholder:" Boleta / Factura / Guia"}),d.documento&&l.documento?e(j,{children:d.documento}):null]}),r("div",{className:"mb-4",children:[e("label",{className:"text-gray-800  ",htmlFor:"notas",children:"Notas:"}),e(v,{as:"textarea",type:"text",id:"notas",name:"notas",className:"mt-2 block w-full h-40 p-3 bg-gray-100",placeholder:" Mensaje "}),d.notas&&l.notas?e(j,{children:d.notas}):null]}),e("div",{className:"mb-4",children:e("input",{type:"file",onChange:i,className:"block w-full text-sm text-gray-500\r file:mr-4 file:py-2 file:px-4\r file:rounded-full file:border-0\r file:text-sm file:font-semibold\r file:bg-violet-50 file:text-orange-700\r hover:file:bg-violet-100"})}),e("input",{type:"submit",value:(t==null?void 0:t.nombre)?"Editar":"Agregar Despacho",className:"mt-5 w-full bg-orange-800 p-3 text-white uppercase font-bold text-lg\r cursor-pointer hover:text-orange-300 transition-colors"})]})})]})};le.defaultProps={despacho:{},cargando:!1};const Ge=()=>r(p,{children:[e("h1",{className:"font-extrabold text-4xl flex justify-center text-orange-900",children:"Nuevo Despacho"}),e(le,{})]}),Ue=z(g);function We(){const[t,a]=h.exports.useState(!0);return h.exports.useEffect(()=>{je(Ue,o=>{a(!o)})},[]),e(p,{children:e(pe,{children:e(xe,{children:t?r(p,{children:[e(y,{path:"/",element:e(Ae,{}),children:e(y,{index:!0,element:e(Me,{})})}),e(y,{path:"/*",element:e(U,{replace:!0,to:"/"})})]}):r(p,{children:[e(y,{path:"/",element:e(U,{replace:!0,to:"/despachos"})}),r(y,{path:"/despachos",element:e(qe,{}),children:[e(y,{index:!0,element:e(Te,{})}),e(y,{path:"nuevo",element:e(Ge,{})}),e(y,{path:"editar/:id",element:e(Pe,{})}),e(y,{path:":id",element:e(ze,{})})]})]})})})})}be.render(e(he.StrictMode,{children:e(We,{})}),document.getElementById("root"));
